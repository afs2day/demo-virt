#  oc process -f templates/template-nncp-nic-vlan-br.yaml \
#   -p VLAN=1924 \
#   -p NIC=ens224 \
#   -p NODE_SELECTOR_KEY=machine.openshift.io/cluster-api-machineset \
#   -p NODE_SELECTOR_VALUE=hub-tq2sk-cnv \
#   -o yaml | yq e '.items[0]' - > nncp-ens224-br-vlan-1924.yaml
---
apiVersion: nmstate.io/v1
kind: NodeNetworkConfigurationPolicy
metadata:
  annotations:
    description: Add VLAN 1924 and Bridge br-1924 on ens224
  name: ens224-v1924
spec:
  desiredState:
    interfaces:
      - ipv4:
          enabled: false
        ipv6:
          enabled: false
        name: ens224
        state: up
        type: ethernet
      - ipv4:
          enabled: false
        ipv6:
          enabled: false
        name: ens224.1924
        state: up
        type: vlan
        vlan:
          base-iface: ens224
          id: "1924"
      - bridge:
          options:
            stp:
              enabled: false
          port:
            - name: ens224.1924
              vlan: {}
        ipv4:
          enabled: false
        ipv6:
          enabled: false
        name: br-1924
        state: up
        type: linux-bridge
  nodeSelector:
    machine.openshift.io/cluster-api-machineset: hub-tq2sk-cnv